(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41a08f97"],{"0d7a":function(t,e,c){t.exports=c.p+"img/Joey.328b60a1.png"},3160:function(t,e,c){"use strict";c("8ba7")},4015:function(t,e,c){"use strict";c.r(e);c("b0c0");var a=c("7a23"),i=c("0d7a"),l=c.n(i),n=Object(a["T"])("data-v-ef0a9a7e");Object(a["z"])("data-v-ef0a9a7e");var s={key:0,class:"container mt-5 mb-5"},r=Object(a["i"])("div",{class:"row text-center mb-5"},[Object(a["i"])("div",{class:"col-md-4"},[Object(a["i"])("div",{class:"alert alert-success alert-rounded",role:"alert"},[Object(a["i"])("i",{class:"bi bi-menu-button-wide-fill"}),Object(a["h"])(" 1.填寫資料 ")])]),Object(a["i"])("div",{class:"col-md-4"},[Object(a["i"])("div",{class:"alert alert-primary alert-rounded",role:"alert"},[Object(a["i"])("i",{class:"bi bi-credit-card-2-back"}),Object(a["h"])(" 2.付款 ")])]),Object(a["i"])("div",{class:"col-md-4"},[Object(a["i"])("div",{class:"alert alert-primary alert-rounded",role:"alert"},[Object(a["i"])("i",{class:"bi bi-file-check-fill"}),Object(a["h"])(" 3.完成訂單 ")])])],-1),o={class:"productList ps-3 pe-3 mt-3 mx-auto",style:{"max-width":"800px"}},u={class:"row"},d=Object(a["i"])("div",{class:"col-sm-6"},[Object(a["i"])("button",{class:"btn btn-outline-primary btn-lg my-2 p-2 w-100",type:"button","data-bs-toggle":"collapse","data-bs-target":".multi-collapse","aria-expanded":"false","aria-controls":"multiCollapseExample1 multiCollapseExample2"},"顯示牌組清單")],-1),b={class:"col-sm-6"},m=Object(a["i"])("br",null,null,-1),p={class:"collapse multi-collapse",id:"multiCollapseExample2"},O={class:"mx-2"},j={key:0,class:"text-warning"},f={class:"row align-items-center"},h={class:"col-sm-4 col-6 text-center p-2"},g={class:"card-title text-center"},v={class:"col-sm-2 col-6 text-center p-2"},x={key:0,class:"text-warning"},y={class:"col-sm-4 col-12"},w={class:"card-body"},C={class:"input-group input-group-sm my-1 py-2 flex-nowrap"},k=Object(a["i"])("i",{class:"bi bi-dash-lg"},null,-1),$=Object(a["i"])("i",{class:"bi bi-plus-lg"},null,-1),I={class:"col-sm-2 col-12 text-center"},_=Object(a["i"])("i",{class:"bi bi-x"},null,-1),V=Object(a["h"])("移除"),L={class:"m-auto p-2",style:{"max-width":"600px"}},q={key:0,class:"text-warning text-end"},A={class:"input-group mb-3 input-group-sm m-auto",style:{"max-width":"600px"}},P={class:"input-group-append"},S=Object(a["i"])("hr",null,null,-1),U=Object(a["i"])("hr",{class:"text-white"},null,-1),F={class:"row"},N={class:"text-white ps-5 pe-5 mx-auto mt-5",style:{"max-width":"800px"}},R=Object(a["i"])("h3",{class:"text-center"},"聯絡人資訊",-1),z={class:"form-group my-2"},E=Object(a["i"])("label",{for:"useremail"},[Object(a["i"])("i",{class:"bi bi-envelope-fill"}),Object(a["h"])(" 電子郵件")],-1),J=Object(a["i"])("p",{class:"text-danger"},[Object(a["i"])("i",{class:"bi bi-exclamation-circle-fill"}),Object(a["h"])("電子郵件格式不符")],-1),M={class:"form-group my-2"},T=Object(a["i"])("label",{for:"username"},[Object(a["i"])("i",{class:"bi bi-person-fill"}),Object(a["h"])(" 收件人姓名")],-1),D=Object(a["i"])("p",{class:"text-danger"},[Object(a["i"])("i",{class:"bi bi-exclamation-circle-fill"}),Object(a["h"])("姓名欄位不得為空")],-1),Z={class:"form-group my-2"},B=Object(a["i"])("label",{for:"userphone"},[Object(a["i"])("i",{class:"bi bi-telephone-fill"}),Object(a["h"])(" 收件人電話")],-1),G=Object(a["i"])("p",{class:"text-danger"},[Object(a["i"])("i",{class:"bi bi-exclamation-circle-fill"}),Object(a["h"])("需要正確的電話號碼")],-1),H={class:"form-group my-2"},K=Object(a["i"])("label",{for:"useraddress"},[Object(a["i"])("i",{class:"bi bi-house-door-fill"}),Object(a["h"])(" 收件人地址")],-1),Q=Object(a["i"])("p",{class:"text-danger"},[Object(a["i"])("i",{class:"bi bi-exclamation-circle-fill"}),Object(a["h"])("地址欄位不得為空")],-1),W={class:"form-group"},X=Object(a["i"])("label",{for:"comment"},[Object(a["i"])("i",{class:"bi bi-chat-square-text"}),Object(a["h"])(" 留言")],-1),Y=Object(a["i"])("br",null,null,-1),tt=Object(a["i"])("div",{class:"d-grid mt-4"},[Object(a["i"])("button",{class:"btn btn-danger btn-lg",type:"submit"},"送出訂單")],-1),et={key:1},ct={class:"card m-auto mt-5 mb-5 bg-dark text-white",style:{"max-width":"400px"}},at=Object(a["i"])("h2",{class:"p-2"},"牌抽光了???",-1),it=Object(a["i"])("img",{src:l.a,class:"card-img-top",alt:"..."},null,-1),lt=Object(a["i"])("div",{class:"card-body"},[Object(a["i"])("p",null,"沒有卡片怎麼成為決鬥者呢??"),Object(a["i"])("p",null,"快回去選購吧!!")],-1);Object(a["x"])();var nt=n((function(t,e,c,i,l,nt){var st=Object(a["F"])("loadingCustom"),rt=Object(a["F"])("vfield"),ot=Object(a["F"])("error-message"),ut=Object(a["F"])("vform");return Object(a["w"])(),Object(a["e"])(a["a"],null,[Object(a["i"])(st,{tempIsLoading:nt.isLoading},null,8,["tempIsLoading"]),0!==nt.cartNum?(Object(a["w"])(),Object(a["e"])("div",s,[r,Object(a["i"])("div",o,[Object(a["i"])("div",u,[d,Object(a["i"])("div",b,[Object(a["i"])("button",{class:"btn btn-outline-success my-2 p-2 btn-lg w-100",onClick:e[1]||(e[1]=function(){return nt.toProducts&&nt.toProducts.apply(nt,arguments)})},"繼續選購")])]),m,Object(a["i"])("div",p,[Object(a["i"])("div",O,[nt.cart.final_total!==nt.cart.total?(Object(a["w"])(),Object(a["e"])("p",j,"已套用優惠卷，若有重新選購請再重新輸入優惠碼")):Object(a["f"])("",!0),(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["D"])(nt.carts,(function(t){return Object(a["w"])(),Object(a["e"])("div",{class:"card mb-4 text-white m-auto w-100",style:{"background-color":"#000"},key:t.id},[Object(a["i"])("div",f,[Object(a["i"])("div",h,[Object(a["i"])("div",{style:{backgroundImage:"url(".concat(t.product.imageUrl,")")},class:"cardImg mx-auto text-center d-none d-sm-block"},null,4),Object(a["i"])("h5",g,Object(a["I"])(t.product.title),1)]),Object(a["i"])("div",v,[Object(a["i"])("p",{class:{"text-decoration-line-through":t.final_total!==t.total}},"$ "+Object(a["I"])(t.total),3),t.final_total!==t.total?(Object(a["w"])(),Object(a["e"])("p",x,"$ "+Object(a["I"])(t.final_total),1)):Object(a["f"])("",!0)]),Object(a["i"])("div",y,[Object(a["i"])("div",w,[Object(a["i"])("div",C,[Object(a["i"])("button",{class:"input-group-text btnNum",onClick:function(e){return nt.handleSub(t,t.qty)}},[k],8,["onClick"]),Object(a["R"])(Object(a["i"])("input",{size:"2",type:"number",class:"numText text-center",min:"0",max:"99","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return nt.updateCart(t,t.qty)},disabled:""},null,40,["onUpdate:modelValue","onChange"]),[[a["M"],t.qty,void 0,{number:!0}]]),Object(a["i"])("button",{class:"input-group-text btnNum",onClick:function(e){return nt.handlePlus(t,t.qty)}},[$],8,["onClick"])])])]),Object(a["i"])("div",I,[Object(a["i"])("button",{type:"button",class:"btn btn-outline-danger btn-lg p-2 mb-2",onClick:function(e){return nt.removeCart(t.id)}},[_,V],8,["onClick"])])])])})),128)),Object(a["i"])("div",L,[Object(a["i"])("h4",{class:["text-white text-end",{"text-decoration-line-through":nt.cart.final_total!==nt.cart.total}]},"總計 $ "+Object(a["I"])(nt.cart.total),3),nt.cart.final_total!==nt.cart.total?(Object(a["w"])(),Object(a["e"])("h4",q,"折扣價 $ "+Object(a["I"])(nt.cart.final_total),1)):Object(a["f"])("",!0)]),Object(a["i"])("div",A,[Object(a["R"])(Object(a["i"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","onUpdate:modelValue":e[2]||(e[2]=function(t){return l.couponCode=t})},null,512),[[a["M"],l.couponCode]]),Object(a["i"])("div",P,[Object(a["i"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[3]||(e[3]=function(){return nt.addCouponCode&&nt.addCouponCode.apply(nt,arguments)})}," 套用優惠碼 ")])]),S])])]),U,Object(a["i"])("div",F,[Object(a["i"])("div",N,[Object(a["i"])(ut,{class:"mt-3",onSubmit:nt.createdOrder},{default:n((function(t){var c=t.errors;return[R,Object(a["i"])("div",z,[E,Object(a["i"])(rt,{type:"email",class:["form-control",{"is-invalid":c.email}],name:"email",id:"useremail",placeholder:"請輸入 Email",rules:"email|required",modelValue:l.form.user.email,"onUpdate:modelValue":e[4]||(e[4]=function(t){return l.form.user.email=t})},null,8,["class","modelValue"]),Object(a["i"])(ot,{class:"text-danger",name:"email"},{default:n((function(){return[J]})),_:1})]),Object(a["i"])("div",M,[T,Object(a["i"])(rt,{type:"text",class:"form-control",name:"name",id:"username",placeholder:"輸入姓名",rules:nt.isRequired,modelValue:l.form.user.name,"onUpdate:modelValue":e[5]||(e[5]=function(t){return l.form.user.name=t})},null,8,["rules","modelValue"]),Object(a["i"])(ot,{class:"text-danger",name:"name"},{default:n((function(){return[D]})),_:1})]),Object(a["i"])("div",Z,[B,Object(a["i"])(rt,{type:"tel",class:"form-control",name:"tel",id:"tel",placeholder:"請輸入電話",rules:nt.isPhone,modelValue:l.form.user.tel,"onUpdate:modelValue":e[6]||(e[6]=function(t){return l.form.user.tel=t})},null,8,["rules","modelValue"]),Object(a["i"])(ot,{class:"text-danger",name:"tel"},{default:n((function(){return[G]})),_:1})]),Object(a["i"])("div",H,[K,Object(a["i"])(rt,{type:"text",class:"form-control",name:"address",id:"useraddress",placeholder:"請輸入地址",rules:nt.isRequired,modelValue:l.form.user.address,"onUpdate:modelValue":e[7]||(e[7]=function(t){return l.form.user.address=t})},null,8,["rules","modelValue"]),Object(a["i"])(ot,{class:"text-danger",name:"address"},{default:n((function(){return[Q]})),_:1})]),Object(a["i"])("div",W,[X,Object(a["R"])(Object(a["i"])("textarea",{name:"",id:"comment",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[8]||(e[8]=function(t){return l.form.message=t})},null,512),[[a["M"],l.form.message]])]),Y,tt]})),_:1},8,["onSubmit"])])])])):(Object(a["w"])(),Object(a["e"])("section",et,[Object(a["i"])("div",ct,[at,it,lt,Object(a["i"])("button",{class:"btn btn-outline-success m-2 py-3",onClick:e[9]||(e[9]=function(){return nt.toProducts&&nt.toProducts.apply(nt,arguments)})},"繼續選購")])]))],64)})),st=(c("99af"),c("7bb1"));function rt(t,e){return Array.isArray(t)?t[0]:t[e]}const ot=t=>{const e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return Array.isArray(t)?t.every(t=>e.test(String(t))):e.test(String(t))};function ut(t){return null===t||void 0===t}function dt(t){return Array.isArray(t)&&0===t.length}const bt=(t,e)=>{const c=rt(e,"length");return!ut(t)&&(Array.isArray(t)?t.every(t=>bt(t,{length:c})):String(t).length>=Number(c))},mt=t=>!ut(t)&&!dt(t)&&!1!==t&&!!String(t).trim().length;var pt=c("5c0d");Object(st["d"])("required",mt),Object(st["d"])("email",ot),Object(st["d"])("min",bt);var Ot={data:function(){return{status:{loadingItem:""},couponCode:"",form:{user:{email:"",name:"",address:"",tel:""},message:""}}},components:{loadingCustom:pt["a"]},computed:{isLoading:function(){return this.$store.state.isLoading},cart:function(){return this.$store.state.cart},carts:function(){return this.$store.state.cart.carts},cartNum:function(){return void 0===this.$store.state.cart.carts?0:this.$store.state.cart.carts.length}},methods:{getCart:function(){this.$store.dispatch("getCart")},removeCart:function(t){this.$store.dispatch("removeCart",t)},updateCart:function(t,e){var c=this;this.$store.dispatch("updateLoading",!0),this.status.loadingItem=t.id;var a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("sly8462","/cart/").concat(t.id),i={product_id:t.id,qty:e};this.$http.put(a,{data:i}).then((function(t){c.getCart(),c.status.loadingItem="",c.$store.dispatch("updateLoading",!1)}))},addCouponCode:function(){var t=this;this.$store.dispatch("updateLoading",!0);var e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("sly8462","/coupon"),c={code:this.couponCode};this.$http.post(e,{data:c}).then((function(e){t.getCart(),t.$store.dispatch("updateLoading",!1)}))},isRequired:function(t){return!!t||"message"},isPhone:function(t){var e=/^(09)[0-9]{8}$/;return!!e.test(t)||"需要正確的電話號碼"},createdOrder:function(){var t=this;this.$store.dispatch("updateLoading",!0);var e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("sly8462","/order"),c=this.form;this.$http.post(e,{data:c}).then((function(e){t.$store.dispatch("updateLoading",!1),t.$router.push("/checkout/".concat(e.data.orderId))}))},handlePlus:function(t,e){var c=e;c<99&&(c++,this.updateCart(t,c))},handleSub:function(t,e){var c=e;c>1&&(c--,this.updateCart(t,c))},toProducts:function(){this.$router.push("/product")}},created:function(){this.getCart()}};c("3160");Ot.render=nt,Ot.__scopeId="data-v-ef0a9a7e";e["default"]=Ot},"5c0d":function(t,e,c){"use strict";var a=c("7a23"),i=Object(a["T"])("data-v-0577946f");Object(a["z"])("data-v-0577946f");var l=Object(a["i"])("div",{class:"circle"},null,-1),n=Object(a["i"])("p",{class:"loading fw-bolder text-white fs-3"},"LOADING",-1);Object(a["x"])();var s=i((function(t,e,c,s,r,o){var u=Object(a["F"])("loading");return Object(a["w"])(),Object(a["e"])(u,{active:c.tempIsLoading,class:"text-center loading"},{default:i((function(){return[l,n]})),_:1},8,["active"])})),r={props:{tempIsLoading:{type:Boolean,default:function(){return!1}}}};c("a0b5");r.render=s,r.__scopeId="data-v-0577946f";e["a"]=r},"8ba7":function(t,e,c){},a0b5:function(t,e,c){"use strict";c("c1da")},b0c0:function(t,e,c){var a=c("83ab"),i=c("9bf2").f,l=Function.prototype,n=l.toString,s=/^\s*function ([^ (]*)/,r="name";a&&!(r in l)&&i(l,r,{configurable:!0,get:function(){try{return n.call(this).match(s)[1]}catch(t){return""}}})},c1da:function(t,e,c){}}]);
//# sourceMappingURL=chunk-41a08f97.5ff5d332.js.map