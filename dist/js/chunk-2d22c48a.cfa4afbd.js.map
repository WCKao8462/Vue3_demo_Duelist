{"version":3,"sources":["webpack:///./src/views/Coupons.vue","webpack:///./src/components/CouponModal.vue","webpack:///./src/components/CouponModal.vue?80f5","webpack:///./src/views/Coupons.vue?7700"],"names":["class","width","active","isLoading","type","openModal","coupons","item","key","id","title","code","percent","due_date","is_enabled","isNew","delModal","ref","coupon","tempCoupon","updateCoupon","deleteProduct","tabindex","aria-labelledby","aria-hidden","role","data-bs-dismiss","aria-label","for","placeholder","min","max","step","true-value","false-value","$emit","props","Object","default","watch","this","mixins","data","modal","render","isDelete","deletedID","components","couponModal","methods","getCoupons","api","$http","get","then","res","success","console","log","couponComponent","$refs","showModal","httpMethod","hideModal","delete","alert","created"],"mappings":"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","file":"js/chunk-2d22c48a.cfa4afbd.js","sourcesContent":["<template>\r\n  <loading :active=\"isLoading\"></loading>\r\n  <div class=\"text-end\">\r\n    <button\r\n      class=\"btn btn-primary\"\r\n      type=\"button\"\r\n      @click=\"openModal\"\r\n    >\r\n      增加優惠券\r\n    </button>\r\n  </div>\r\n\r\n  <table class=\"table mt-4 text-white\">\r\n    <thead>\r\n      <tr>\r\n        <th width=\"150\">優惠名稱</th>\r\n        <th width=\"150\">優惠碼</th>\r\n        <th width=\"150\">折扣</th>\r\n        <th width=\"150\">到期日</th>\r\n        <th width=\"150\">是否啟用</th>\r\n        <th width=\"200\">編輯</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"item in coupons\" :key=\"item.id\">\r\n        <td>{{ item.title }}</td>\r\n        <td>{{ item.code }}</td>\r\n        <td class=\"text-right\">{{ item.percent }}%</td>\r\n        <td class=\"text-right\">{{ item.due_date }}</td>\r\n        <td>\r\n          <span class=\"text-success\" v-if=\"item.is_enabled\">啟用</span>\r\n          <span class=\"text-muted\" v-else>未啟用</span>\r\n        </td>\r\n        <td>\r\n          <div class=\"btn-group\">\r\n            <button\r\n              class=\"btn btn-outline-primary btn-sm\"\r\n              @click=\"openModal((isNew = false), item)\"\r\n            >\r\n              編輯\r\n            </button>\r\n            <button\r\n              class=\"btn btn-outline-danger btn-sm\"\r\n              @click=\"delModal(item.id)\"\r\n            >\r\n              刪除\r\n            </button>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <couponModal\r\n    ref=\"couponModal\"\r\n    :coupon=\"tempCoupon\"\r\n    @update-coupon=\"updateCoupon\"\r\n  ></couponModal>\r\n  <delModal ref=\"delModal\" @delete-item=\"deleteProduct\"></delModal>\r\n</template>\r\n\r\n<script>\r\nimport couponModal from '../components/CouponModal.vue'\r\nimport delModal from '../components/DelModal.vue'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      coupons: [], // 寄放從後端取得的資料\r\n      isLoading: false,\r\n      tempCoupon: {},\r\n      isDelete: false,\r\n      deletedID: ''\r\n    }\r\n  },\r\n  components: {\r\n    couponModal,\r\n    delModal\r\n  },\r\n  methods: {\r\n    getCoupons () {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupons`\r\n      this.isLoading = true\r\n      this.$http.get(api).then((res) => {\r\n        if (res.data.success) {\r\n          console.log(res)\r\n          this.coupons = res.data.coupons\r\n          this.isLoading = false\r\n        }\r\n      })\r\n    },\r\n    openModal () {\r\n      const couponComponent = this.$refs.couponModal\r\n      couponComponent.showModal()\r\n    },\r\n    delModal (id) {\r\n      this.deletedID = id\r\n      const couponComponent = this.$refs.delModal\r\n      couponComponent.showModal()\r\n    },\r\n    updateCoupon (item) {\r\n      this.isLoading = true\r\n      this.tempCoupon = item\r\n      const couponComponent = this.$refs.couponModal\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupon`\r\n      const httpMethod = 'post'\r\n      this.$http[httpMethod](api, { data: this.tempCoupon }).then((res) => {\r\n        this.tempCoupon = {}\r\n        couponComponent.hideModal()\r\n        this.getCoupons()\r\n      })\r\n    },\r\n    deleteProduct (isDelete) {\r\n      this.isDelete = isDelete\r\n      const couponComponent = this.$refs.delModal\r\n      this.isLoading = true\r\n      if (this.isDelete) {\r\n        const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupon/${this.deletedID}`\r\n        this.$http.delete(api).then((res) => {\r\n          console.log(res)\r\n          couponComponent.hideModal()\r\n          this.isDelete = false\r\n          this.deletedID = ''\r\n          this.getCoupons()\r\n          alert('刪除成功')\r\n        })\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getCoupons()\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n  <!-- Modal -->\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"exampleModal\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n    ref=\"modal\"\r\n  >\r\n    <div class=\"modal-dialog modal-md\" role=\"document\">\r\n      <div class=\"modal-content border-0\">\r\n        <div class=\"modal-header bg-dark text-white\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n            <span>新增優惠券</span>\r\n          </h5>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-sm-8\">\r\n              <div class=\"row gx-2\">\r\n                <div class=\"mb-3 col-md-12\">\r\n                  <label for=\"price\" class=\"form-label\">優惠名稱</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    id=\"title\"\r\n                    placeholder=\"請輸入優惠名稱\"\r\n                    v-model=\"tempCoupon.title\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"row gx-2\">\r\n                <div class=\"mb-3 col-md-12\">\r\n                  <label for=\"price\" class=\"form-label\">優惠碼</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    id=\"code\"\r\n                    placeholder=\"請輸入優惠碼\"\r\n                    v-model=\"tempCoupon.code\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"row gx-2\">\r\n                <div class=\"mb-3 col-md-12\">\r\n                  <label for=\"origin_price\" class=\"form-label\">折扣</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    class=\"form-control\"\r\n                    id=\"percent\"\r\n                    min=\"10\"\r\n                    max=\"90\"\r\n                    step=\"5\"\r\n                    placeholder=\"請輸入折扣\"\r\n                    v-model=\"tempCoupon.percent\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"row gx-2\">\r\n                <div class=\"mb-3 col-md-12\">\r\n                  <label for=\"price\" class=\"form-label\">到期日</label>\r\n                  <input\r\n                    type=\"date\"\r\n                    class=\"form-control\"\r\n                    id=\"due_date\"\r\n                    placeholder=\"請輸入到期日\"\r\n                    v-model=\"tempCoupon.due_date\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <div class=\"form-check\">\r\n                  <input\r\n                    class=\"form-check-input\"\r\n                    type=\"checkbox\"\r\n                    :true-value=\"1\"\r\n                    :false-value=\"0\"\r\n                    v-model=\"tempCoupon.is_enabled\"\r\n                    id=\"is_enabled\"\r\n                  />\r\n                  <label class=\"form-check-label\" for=\"is_enabled\">\r\n                    是否啟用\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-outline-secondary\"\r\n            data-bs-dismiss=\"modal\"\r\n          >\r\n            取消\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-primary\"\r\n          @click=\"$emit('update-coupon', tempCoupon)\">確認</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport modalMixin from '@/mixins/ModalMixin'\r\n\r\nexport default {\r\n  props: {\r\n    coupon: {\r\n      type: Object,\r\n      default () { return {} }\r\n    }\r\n  },\r\n  watch: {\r\n    coupon () {\r\n      this.tempCoupon = this.coupon\r\n    }\r\n  },\r\n  mixins: [modalMixin],\r\n  data () {\r\n    return {\r\n      modal: {},\r\n      tempCoupon: {}\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./CouponModal.vue?vue&type=template&id=04b246c0\"\nimport script from \"./CouponModal.vue?vue&type=script&lang=js\"\nexport * from \"./CouponModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Coupons.vue?vue&type=template&id=19c00685\"\nimport script from \"./Coupons.vue?vue&type=script&lang=js\"\nexport * from \"./Coupons.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}