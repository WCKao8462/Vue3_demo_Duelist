(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22c48a"],{f329:function(t,e,o){"use strict";o.r(e);var c=o("7a23"),n={class:"text-end"},l={class:"table mt-4 text-white"},i=Object(c["i"])("thead",null,[Object(c["i"])("tr",null,[Object(c["i"])("th",{width:"150"},"優惠名稱"),Object(c["i"])("th",{width:"150"},"優惠碼"),Object(c["i"])("th",{width:"150"},"折扣"),Object(c["i"])("th",{width:"150"},"到期日"),Object(c["i"])("th",{width:"150"},"是否啟用"),Object(c["i"])("th",{width:"200"},"編輯")])],-1),a={class:"text-right"},d={class:"text-right"},s={key:0,class:"text-success"},u={key:1,class:"text-muted"},b={class:"btn-group"};function p(t,e,o,p,r,j){var m=Object(c["F"])("loading"),O=Object(c["F"])("couponModal"),h=Object(c["F"])("delModal");return Object(c["w"])(),Object(c["e"])(c["a"],null,[Object(c["i"])(m,{active:r.isLoading},null,8,["active"]),Object(c["i"])("div",n,[Object(c["i"])("button",{class:"btn btn-primary",type:"button",onClick:e[1]||(e[1]=function(){return j.openModal&&j.openModal.apply(j,arguments)})}," 增加優惠券 ")]),Object(c["i"])("table",l,[i,Object(c["i"])("tbody",null,[(Object(c["w"])(!0),Object(c["e"])(c["a"],null,Object(c["D"])(r.coupons,(function(e){return Object(c["w"])(),Object(c["e"])("tr",{key:e.id},[Object(c["i"])("td",null,Object(c["I"])(e.title),1),Object(c["i"])("td",null,Object(c["I"])(e.code),1),Object(c["i"])("td",a,Object(c["I"])(e.percent)+"%",1),Object(c["i"])("td",d,Object(c["I"])(e.due_date),1),Object(c["i"])("td",null,[e.is_enabled?(Object(c["w"])(),Object(c["e"])("span",s,"啟用")):(Object(c["w"])(),Object(c["e"])("span",u,"未啟用"))]),Object(c["i"])("td",null,[Object(c["i"])("div",b,[Object(c["i"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(o){return j.openModal(t.isNew=!1,e)}}," 編輯 ",8,["onClick"]),Object(c["i"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(t){return j.delModal(e.id)}}," 刪除 ",8,["onClick"])])])])})),128))])]),Object(c["i"])(O,{ref:"couponModal",coupon:r.tempCoupon,onUpdateCoupon:j.updateCoupon},null,8,["coupon","onUpdateCoupon"]),Object(c["i"])(h,{ref:"delModal",onDeleteItem:j.deleteProduct},null,8,["onDeleteItem"])],64)}o("99af");var r={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},j={class:"modal-dialog modal-md",role:"document"},m={class:"modal-content border-0"},O=Object(c["i"])("div",{class:"modal-header bg-dark text-white"},[Object(c["i"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(c["i"])("span",null,"新增優惠券")]),Object(c["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),h={class:"modal-body"},f={class:"row"},v={class:"col-sm-8"},C={class:"row gx-2"},w={class:"mb-3 col-md-12"},M=Object(c["i"])("label",{for:"price",class:"form-label"},"優惠名稱",-1),g={class:"row gx-2"},y={class:"mb-3 col-md-12"},x=Object(c["i"])("label",{for:"price",class:"form-label"},"優惠碼",-1),k={class:"row gx-2"},D={class:"mb-3 col-md-12"},I=Object(c["i"])("label",{for:"origin_price",class:"form-label"},"折扣",-1),_={class:"row gx-2"},L={class:"mb-3 col-md-12"},$=Object(c["i"])("label",{for:"price",class:"form-label"},"到期日",-1),U={class:"mb-3"},R={class:"form-check"},V=Object(c["i"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),F={class:"modal-footer"},J=Object(c["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function P(t,e,o,n,l,i){return Object(c["w"])(),Object(c["e"])("div",r,[Object(c["i"])("div",j,[Object(c["i"])("div",m,[O,Object(c["i"])("div",h,[Object(c["i"])("div",f,[Object(c["i"])("div",v,[Object(c["i"])("div",C,[Object(c["i"])("div",w,[M,Object(c["R"])(Object(c["i"])("input",{type:"text",class:"form-control",id:"title",placeholder:"請輸入優惠名稱","onUpdate:modelValue":e[1]||(e[1]=function(t){return l.tempCoupon.title=t})},null,512),[[c["M"],l.tempCoupon.title]])])]),Object(c["i"])("div",g,[Object(c["i"])("div",y,[x,Object(c["R"])(Object(c["i"])("input",{type:"text",class:"form-control",id:"code",placeholder:"請輸入優惠碼","onUpdate:modelValue":e[2]||(e[2]=function(t){return l.tempCoupon.code=t})},null,512),[[c["M"],l.tempCoupon.code]])])]),Object(c["i"])("div",k,[Object(c["i"])("div",D,[I,Object(c["R"])(Object(c["i"])("input",{type:"number",class:"form-control",id:"percent",min:"10",max:"90",step:"5",placeholder:"請輸入折扣","onUpdate:modelValue":e[3]||(e[3]=function(t){return l.tempCoupon.percent=t})},null,512),[[c["M"],l.tempCoupon.percent]])])]),Object(c["i"])("div",_,[Object(c["i"])("div",L,[$,Object(c["R"])(Object(c["i"])("input",{type:"date",class:"form-control",id:"due_date",placeholder:"請輸入到期日","onUpdate:modelValue":e[4]||(e[4]=function(t){return l.tempCoupon.due_date=t})},null,512),[[c["M"],l.tempCoupon.due_date]])])]),Object(c["i"])("div",U,[Object(c["i"])("div",R,[Object(c["R"])(Object(c["i"])("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[5]||(e[5]=function(t){return l.tempCoupon.is_enabled=t}),id:"is_enabled"},null,512),[[c["L"],l.tempCoupon.is_enabled]]),V])])])])]),Object(c["i"])("div",F,[J,Object(c["i"])("button",{type:"button",class:"btn btn-primary",onClick:e[6]||(e[6]=function(e){return t.$emit("update-coupon",l.tempCoupon)})},"確認")])])])],512)}var N=o("db44"),q={props:{coupon:{type:Object,default:function(){return{}}}},watch:{coupon:function(){this.tempCoupon=this.coupon}},mixins:[N["a"]],data:function(){return{modal:{},tempCoupon:{}}}};q.render=P;var z=q,A=o("6ff1"),B={data:function(){return{coupons:[],isLoading:!1,tempCoupon:{},isDelete:!1,deletedID:""}},components:{couponModal:z,delModal:A["a"]},methods:{getCoupons:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("sly8462","/admin/coupons");this.isLoading=!0,this.$http.get(e).then((function(e){e.data.success&&(console.log(e),t.coupons=e.data.coupons,t.isLoading=!1)}))},openModal:function(){var t=this.$refs.couponModal;t.showModal()},delModal:function(t){this.deletedID=t;var e=this.$refs.delModal;e.showModal()},updateCoupon:function(t){var e=this;this.isLoading=!0,this.tempCoupon=t;var o=this.$refs.couponModal,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("sly8462","/admin/coupon"),n="post";this.$http[n](c,{data:this.tempCoupon}).then((function(t){e.tempCoupon={},o.hideModal(),e.getCoupons()}))},deleteProduct:function(t){var e=this;this.isDelete=t;var o=this.$refs.delModal;if(this.isLoading=!0,this.isDelete){var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("sly8462","/admin/coupon/").concat(this.deletedID);this.$http.delete(c).then((function(t){console.log(t),o.hideModal(),e.isDelete=!1,e.deletedID="",e.getCoupons(),alert("刪除成功")}))}}},created:function(){this.getCoupons()}};B.render=p;e["default"]=B}}]);
//# sourceMappingURL=chunk-2d22c48a.cfa4afbd.js.map