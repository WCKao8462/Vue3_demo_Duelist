(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24d1c34e"],{"1dde":function(t,e,n){var c=n("d039"),r=n("b622"),o=n("2d00"),a=r("species");t.exports=function(t){return o>=51||!c((function(){var e=[],n=e.constructor={};return n[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"28a6":function(t,e,n){"use strict";n.r(e);n("b0c0");var c=n("7a23"),r=Object(c["T"])("data-v-d43d719c");Object(c["z"])("data-v-d43d719c");var o={class:"d-flex justify-content-around container-fluid my-3"},a={class:"col-6 mx-2"},i=Object(c["i"])("h3",{class:"text-center"},"購物車清單",-1),s={class:"table align-middle mt-3 text-white"},l=Object(c["i"])("thead",null,[Object(c["i"])("tr",null,[Object(c["i"])("th"),Object(c["i"])("th",null,"品名"),Object(c["i"])("th",{style:{width:"110px"}},"數量"),Object(c["i"])("th",{class:"text-center"},"單價"),Object(c["i"])("th",{class:"text-center"})])],-1),u=Object(c["i"])("i",{class:"bi bi-x"},null,-1),d=Object(c["i"])("div",{class:"text-success"},"已套用優惠券",-1),b={class:"input-group input-group-sm"},f=Object(c["i"])("div",{class:"input-group-text"},"/ 張",-1),m={class:"text-center"},p={class:"text-center"},j={class:"text-success"},O=Object(c["i"])("td",{colspan:"3",class:"text-end"},"總計",-1),h={class:"text-end"},v=Object(c["i"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),x={class:"text-end text-success"},g={class:"input-group mb-3 input-group-sm"},y={class:"input-group-append"},C={class:"row justify-content-center col-6 mx-3 text-white"},w=Object(c["i"])("h3",{class:"text-center"},"聯絡人資訊",-1),A={class:"form-group"},V=Object(c["i"])("label",{for:"useremail"},"Email",-1),I=Object(c["h"])("電子郵件格式不符"),q={class:"form-group"},_=Object(c["i"])("label",{for:"username"},"收件人姓名",-1),k=Object(c["h"])("姓名欄位不得留空"),S={class:"form-group"},U=Object(c["i"])("label",{for:"userphone"},"收件人電話",-1),$={class:"form-group"},R=Object(c["i"])("label",{for:"useraddress"},"收件人地址",-1),E=Object(c["h"])("地址欄位不得留空"),F={class:"form-group"},M=Object(c["i"])("label",{for:"comment"},"留言",-1),T=Object(c["i"])("div",{class:"d-grid mt-4"},[Object(c["i"])("button",{class:"btn btn-danger",type:"submit"},"送出訂單")],-1),z=Object(c["i"])("div",{class:"footer d-flex"},[Object(c["i"])("ul",{class:"text-white my-3 container-fluid"},[Object(c["i"])("li",null,[Object(c["h"])(" 聯絡我們 : "),Object(c["i"])("a",{href:"mail:xxxxxx@mail.com"},"xxxxxx@mail.com")]),Object(c["i"])("li",null,[Object(c["h"])(" 電話 : "),Object(c["i"])("a",{href:"tel:0912345678"},"0912345678")])])],-1);Object(c["x"])();var J=r((function(t,e,n,J,L,P){var Z=Object(c["F"])("vfield"),B=Object(c["F"])("error-message"),D=Object(c["F"])("vform");return Object(c["w"])(),Object(c["e"])(c["a"],null,[Object(c["i"])("div",o,[Object(c["i"])("div",a,[i,Object(c["i"])("table",s,[l,Object(c["i"])("tbody",null,[(Object(c["w"])(!0),Object(c["e"])(c["a"],null,Object(c["D"])(L.cart.carts,(function(t){return Object(c["w"])(),Object(c["e"])("tr",{key:t.id},[Object(c["i"])("td",null,[Object(c["i"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return P.deleteCart(t.id)}},[u],8,["onClick"])]),Object(c["i"])("td",null,[Object(c["h"])(Object(c["I"])(t.product.title)+" ",1),d]),Object(c["i"])("td",null,[Object(c["i"])("div",b,[Object(c["R"])(Object(c["i"])("input",{type:"number",class:"form-control",min:"1",max:"10","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return P.updateCart(t)},disabled:t.id===L.status.loadingItem},null,40,["onUpdate:modelValue","onChange","disabled"]),[[c["M"],t.qty,void 0,{number:!0}]]),f])]),Object(c["i"])("td",m,Object(c["I"])(t.total),1),Object(c["i"])("td",p,[Object(c["i"])("small",j,"折扣價："+Object(c["I"])(t.final_total),1)])])})),128))]),Object(c["i"])("tfoot",null,[Object(c["i"])("tr",null,[O,Object(c["i"])("td",h,Object(c["I"])(L.cart.total),1)]),Object(c["i"])("tr",null,[v,Object(c["i"])("td",x,Object(c["I"])(L.cart.final_total),1)])])]),Object(c["i"])("div",g,[Object(c["R"])(Object(c["i"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","onUpdate:modelValue":e[1]||(e[1]=function(t){return L.couponCode=t})},null,512),[[c["M"],L.couponCode]]),Object(c["i"])("div",y,[Object(c["i"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[2]||(e[2]=function(){return P.addCouponCode&&P.addCouponCode.apply(P,arguments)})}," 套用優惠碼 ")])])]),Object(c["i"])("div",C,[w,Object(c["i"])(D,{class:"mt-3",onSubmit:P.createdOrder},{default:r((function(t){var n=t.errors;return[Object(c["i"])("div",A,[V,Object(c["i"])(Z,{type:"email",class:["form-control",{"is-invalid":n.email}],name:"email",id:"useremail",placeholder:"請輸入 Email",rules:"email|required",modelValue:L.form.user.email,"onUpdate:modelValue":e[3]||(e[3]=function(t){return L.form.user.email=t})},null,8,["class","modelValue"]),Object(c["i"])(B,{class:"text-danger",name:"email"},{default:r((function(){return[I]})),_:1})]),Object(c["i"])("div",q,[_,Object(c["i"])(Z,{type:"text",class:"form-control",name:"name",id:"username",placeholder:"輸入姓名",rules:P.isRequired,modelValue:L.form.user.name,"onUpdate:modelValue":e[4]||(e[4]=function(t){return L.form.user.name=t})},null,8,["rules","modelValue"]),Object(c["i"])(B,{class:"text-danger",name:"name"},{default:r((function(){return[k]})),_:1})]),Object(c["i"])("div",S,[U,Object(c["i"])(Z,{type:"tel",class:"form-control",name:"tel",id:"tel",placeholder:"請輸入電話",rules:P.isPhone,modelValue:L.form.user.tel,"onUpdate:modelValue":e[5]||(e[5]=function(t){return L.form.user.tel=t})},null,8,["rules","modelValue"]),Object(c["i"])(B,{class:"text-danger",name:"tel"})]),Object(c["i"])("div",$,[R,Object(c["i"])(Z,{type:"text",class:"form-control",name:"address",id:"useraddress",placeholder:"請輸入地址",rules:P.isRequired,modelValue:L.form.user.address,"onUpdate:modelValue":e[6]||(e[6]=function(t){return L.form.user.address=t})},null,8,["rules","modelValue"]),Object(c["i"])(B,{class:"text-danger",name:"address"},{default:r((function(){return[E]})),_:1})]),Object(c["i"])("div",F,[M,Object(c["R"])(Object(c["i"])("textarea",{name:"",id:"comment",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[7]||(e[7]=function(t){return L.form.message=t})},null,512),[[c["M"],L.form.message]])]),T]})),_:1},8,["onSubmit"])])]),z],64)})),L=(n("99af"),n("7bb1"));function P(t,e){return Array.isArray(t)?t[0]:t[e]}const Z=t=>{const e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return Array.isArray(t)?t.every(t=>e.test(String(t))):e.test(String(t))};function B(t){return null===t||void 0===t}function D(t){return Array.isArray(t)&&0===t.length}const N=(t,e)=>{const n=P(e,"length");return!B(t)&&(Array.isArray(t)?t.every(t=>N(t,{length:n})):String(t).length>=Number(n))},G=t=>!B(t)&&!D(t)&&!1!==t&&!!String(t).trim().length;Object(L["d"])("required",G),Object(L["d"])("email",Z),Object(L["d"])("min",N);var H={data:function(){return{cart:[],status:{loadingItem:""},couponCode:"",form:{user:{email:"",name:"",address:"",tel:""},message:""}}},methods:{getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("sly8462","/cart");this.$http.get(e).then((function(e){t.cart=e.data.data}))},deleteCart:function(t){var e=this,n="".concat("https://vue3-course-api.hexschool.io","/api/").concat("sly8462","/cart/").concat(t);this.$http.delete(n).then((function(t){e.getCart()}))},updateCart:function(t){var e=this;this.isLoading=!0,this.status.loadingItem=t.id;var n="".concat("https://vue3-course-api.hexschool.io","/api/").concat("sly8462","/cart/").concat(t.id),c={product_id:t.id,qty:t.qty};this.$http.put(n,{data:c}).then((function(t){console.log(t),e.isLoading=!1,e.status.loadingItem="",e.getCart()}))},addCouponCode:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("sly8462","/coupon"),n={code:this.couponCode};this.$http.post(e,{data:n}).then((function(e){console.log(e),t.getCart()}))},isRequired:function(t){return!!t||"This field is required"},isPhone:function(t){var e=/^(09)[0-9]{8}$/;return!!e.test(t)||"需要正確的電話號碼"},createdOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("sly8462","/order"),n=this.form;this.$http.post(e,{data:n}).then((function(e){console.log(e),t.$router.push("/checkout/".concat(e.data.orderId))}))}},created:function(){this.getCart()}};n("a60b");H.render=J,H.__scopeId="data-v-d43d719c";e["default"]=H},"2c2a":function(t,e,n){},"65f0":function(t,e,n){var c=n("861d"),r=n("e8b5"),o=n("b622"),a=o("species");t.exports=function(t,e){var n;return r(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!r(n.prototype)?c(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},8418:function(t,e,n){"use strict";var c=n("c04e"),r=n("9bf2"),o=n("5c6c");t.exports=function(t,e,n){var a=c(e);a in t?r.f(t,a,o(0,n)):t[a]=n}},"99af":function(t,e,n){"use strict";var c=n("23e7"),r=n("d039"),o=n("e8b5"),a=n("861d"),i=n("7b0b"),s=n("50c4"),l=n("8418"),u=n("65f0"),d=n("1dde"),b=n("b622"),f=n("2d00"),m=b("isConcatSpreadable"),p=9007199254740991,j="Maximum allowed index exceeded",O=f>=51||!r((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),h=d("concat"),v=function(t){if(!a(t))return!1;var e=t[m];return void 0!==e?!!e:o(t)},x=!O||!h;c({target:"Array",proto:!0,forced:x},{concat:function(t){var e,n,c,r,o,a=i(this),d=u(a,0),b=0;for(e=-1,c=arguments.length;e<c;e++)if(o=-1===e?a:arguments[e],v(o)){if(r=s(o.length),b+r>p)throw TypeError(j);for(n=0;n<r;n++,b++)n in o&&l(d,b,o[n])}else{if(b>=p)throw TypeError(j);l(d,b++,o)}return d.length=b,d}})},a60b:function(t,e,n){"use strict";n("2c2a")},b0c0:function(t,e,n){var c=n("83ab"),r=n("9bf2").f,o=Function.prototype,a=o.toString,i=/^\s*function ([^ (]*)/,s="name";c&&!(s in o)&&r(o,s,{configurable:!0,get:function(){try{return a.call(this).match(i)[1]}catch(t){return""}}})},e8b5:function(t,e,n){var c=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==c(t)}}}]);
//# sourceMappingURL=chunk-24d1c34e.90782dbd.js.map