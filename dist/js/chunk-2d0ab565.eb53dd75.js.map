{"version":3,"sources":["webpack:///./src/views/Orders.vue","webpack:///./src/views/Orders.vue?2899"],"names":["class","width","active","isLoading","orders","item","key","id","dateTransform","create_at","total","is_paid","paid_date","delModal","ref","deleteOrder","data","isDelete","deletedID","components","methods","getOrders","api","this","$http","get","then","res","success","console","log","time","d","Date","toLocaleString","orderComponent","$refs","showModal","delete","hideModal","alert","created","render"],"mappings":"4IAEWA,MAAM,yB,EACb,eAQQ,cAPN,eAMK,WALH,eAAyB,MAArBC,MAAM,OAAM,QAChB,eAAyB,MAArBA,MAAM,OAAM,QAChB,eAAyB,MAArBA,MAAM,OAAM,QAChB,eAAyB,MAArBA,MAAM,OAAM,QAChB,eAA2B,MAAvBA,MAAM,OAAM,c,YAQRD,MAAM,gB,SACNA,MAAM,e,uBASPA,MAAM,a,EACT,eAIS,UAHPA,MAAM,kCACP,UAED,G,yIA/BV,eAAuC,GAA7BE,OAAQ,EAAAC,WAAS,mBACzB,eAyCM,QAzCN,EAyCM,CAxCN,EASA,eA8BQ,e,mBA7BN,eA4BK,2BA5Bc,EAAAC,QAAM,SAAdC,G,wBAAX,eA4BK,MA5BuBC,IAAKD,EAAKE,I,CACpC,eAA4C,yBAArC,EAAAC,cAAcH,EAAKI,YAAS,GACnC,eAAyB,yBAAlBJ,EAAKK,OAAK,GACjB,eAGK,WAF8BL,EAAKM,S,iBAAtC,eAA0D,OAA1D,EAA+C,U,iBAC/C,eAA4C,OAA5C,EAAiC,WAEnC,eAKK,WAJSN,EAAKO,W,iBAAjB,eAEO,wBADA,EAAAJ,cAAcH,EAAKO,YAAS,K,iBAEnC,eAAoB,aAEtB,eAcK,WAbH,eAYM,MAZN,EAYM,CAXJ,EAKA,eAKS,UAJPZ,MAAM,gCACL,QAAK,mBAAE,EAAAa,SAASR,EAAKE,MACvB,SAED,wB,UAMV,eAA+D,GAArDO,IAAI,WAAY,aAAa,EAAAC,a,wDAM1B,GACbC,KADa,WAEX,MAAO,CACLZ,OAAQ,GACRD,WAAW,EACXc,UAAU,EACVC,UAAW,KAGfC,WAAY,CACVN,SAAA,QAEFO,QAAS,CACPC,UADO,WACM,WACLC,EAAE,UAAO,uCAAP,gBAAsC,UAAtC,iBACRC,KAAKpB,WAAY,EACjBoB,KAAKC,MAAMC,IAAIH,GAAKI,MAAK,SAACC,GACpBA,EAAIX,KAAKY,UACXC,QAAQC,IAAIH,GACZ,EAAKvB,OAASuB,EAAIX,KAAKZ,OACvB,EAAKD,WAAY,OAIvBK,cAZO,SAYQuB,GACb,IAAMC,EAAI,IAAIC,KAAY,IAAPF,GAAaG,iBAChC,OAAOF,GAETnB,SAhBO,SAgBGN,GACRgB,KAAKL,UAAYX,EACjB,IAAM4B,EAAiBZ,KAAKa,MAAMvB,SAClCsB,EAAeE,aAEjBtB,YArBO,SAqBME,GAAU,WACrBM,KAAKN,SAAWA,EAChB,IAAMkB,EAAiBZ,KAAKa,MAAMvB,SAElC,GADAU,KAAKpB,WAAY,EACboB,KAAKN,SAAU,CACjB,IAAMK,EAAE,UAAO,uCAAP,gBAAsC,UAAtC,wBAA8EC,KAAKL,WAC3FK,KAAKC,MAAMc,OAAOhB,GAAKI,MAAK,SAACC,GAC3BE,QAAQC,IAAIH,GACZQ,EAAeI,YACf,EAAKtB,UAAW,EAChB,EAAKC,UAAY,GACjB,EAAKG,YACLmB,MAAM,cAKdC,QAlDa,WAmDXlB,KAAKF,cClGT,EAAOqB,OAASA,EAED","file":"js/chunk-2d0ab565.eb53dd75.js","sourcesContent":["<template>\r\n  <loading :active=\"isLoading\"></loading>\r\n    <table class=\"table mt-4 text-white\">\r\n    <thead>\r\n      <tr>\r\n        <th width=\"200\">建立時間</th>\r\n        <th width=\"150\">訂單金額</th>\r\n        <th width=\"150\">是否付款</th>\r\n        <td width=\"200\">付款時間</td>\r\n        <th width=\"150\">查看詳細內容</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"item in orders\" :key=\"item.id\">\r\n        <td>{{ dateTransform(item.create_at) }}</td>\r\n        <td>{{ item.total }}</td>\r\n        <td>\r\n          <span class=\"text-success\" v-if=\"item.is_paid\">付款完成</span>\r\n          <span class=\"text-danger\" v-else>尚未付款</span>\r\n        </td>\r\n        <td >\r\n          <span v-if=\"item.paid_date\">\r\n              {{ dateTransform(item.paid_date) }}\r\n          </span>\r\n          <span v-else></span>\r\n        </td>\r\n        <td>\r\n          <div class=\"btn-group\">\r\n            <button\r\n              class=\"btn btn-outline-primary btn-sm\"\r\n            >\r\n              詳細資料\r\n            </button>\r\n            <button\r\n              class=\"btn btn-outline-danger btn-sm\"\r\n              @click=\"delModal(item.id)\"\r\n            >\r\n              刪除訂單\r\n            </button>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <delModal ref=\"delModal\" @delete-item=\"deleteOrder\"></delModal>\r\n</template>\r\n\r\n<script>\r\nimport delModal from '../components/DelModal.vue'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      orders: {},\r\n      isLoading: false,\r\n      isDelete: false,\r\n      deletedID: ''\r\n    }\r\n  },\r\n  components: {\r\n    delModal\r\n  },\r\n  methods: {\r\n    getOrders () {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/orders`\r\n      this.isLoading = true\r\n      this.$http.get(api).then((res) => {\r\n        if (res.data.success) {\r\n          console.log(res)\r\n          this.orders = res.data.orders\r\n          this.isLoading = false\r\n        }\r\n      })\r\n    },\r\n    dateTransform (time) {\r\n      const d = new Date(time * 1000).toLocaleString()\r\n      return d\r\n    },\r\n    delModal (id) {\r\n      this.deletedID = id\r\n      const orderComponent = this.$refs.delModal\r\n      orderComponent.showModal()\r\n    },\r\n    deleteOrder (isDelete) {\r\n      this.isDelete = isDelete\r\n      const orderComponent = this.$refs.delModal\r\n      this.isLoading = true\r\n      if (this.isDelete) {\r\n        const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/order/${this.deletedID}`\r\n        this.$http.delete(api).then((res) => {\r\n          console.log(res)\r\n          orderComponent.hideModal()\r\n          this.isDelete = false\r\n          this.deletedID = ''\r\n          this.getOrders()\r\n          alert('刪除成功')\r\n        })\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getOrders()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./Orders.vue?vue&type=template&id=3cc48cf7\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}